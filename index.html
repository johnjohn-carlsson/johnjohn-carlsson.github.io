<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>john-john.nu</title>
<style>
  :root{
    --hud-gap: 12px;           /* space between buttons */
    --hud-pad: 16px;           /* safe area from edges */
    --btn-fz: 20px;
    --screen-inset: 6vmin;     /* how much to zoom video out inside the frame */
  }
  *{ box-sizing: border-box; }

  html, body {
    margin: 0;
    height: 100%;
    background: #000;          /* page behind TV if it ever shows */
    color: #e8e8e8;
    font-family: system-ui, Inter, Segoe UI, Roboto, Arial, sans-serif;
    overflow: hidden;          /* TV fills screen; no scroll */
  }

  /* === Fullscreen TV compositing === */
  .tv {
    position: relative;
    width: 100vw;
    height: 100vh;             /* fill viewport */
    overflow: hidden;
  }

  /* Video layer (under the frame) */
  .tv > video {
    position: absolute;
    left: 50%;
    top: 50%;
    width: 100%;
    height: auto;
    max-width: 700px;      /* cap width */
    max-height: 80vh;      /* optional cap by screen height */
    transform: translate(-50%, -50%);
    object-fit: contain;   /* makes sure entire head is visible */
    display: block;
    z-index: 0;
    }

  /* TV frame overlay (PNG with transparent screen cut-out) */
  .tv-frame {
    position: absolute; inset: 0;
    width: 100%; height: 100%;
    object-fit: cover;         /* same fit as video -> perfect alignment */
    pointer-events: none;      /* don't block clicks */
    z-index: 2;
  }

  /* Optional subtle scanlines (comment out if you don't want them) */
  .scanlines {
    position: absolute; inset: 0; z-index: 1; pointer-events: none;
    background:
      repeating-linear-gradient(
        to bottom,
        rgba(0,0,0,.18) 0px,
        rgba(0,0,0,.18) 1px,
        transparent      2px,
        transparent      3px
      );
    mix-blend-mode: soft-light;
    opacity: .45;
  }

  /* === HUD: title + links overlayed on top of TV === */
  .title {
    position: absolute; left: 50%; top: calc(env(safe-area-inset-top) + 12px);
    transform: translateX(-50%);
    font-size: clamp(1.8rem, 4vw, 3rem);
    font-weight: 700;
    text-shadow: 0 2px 18px rgba(0,0,0,.65);
    z-index: 3;
  }

  .hud {
    position: absolute;
    left: 0; right: 0;
    bottom: calc(env(safe-area-inset-bottom) + var(--hud-pad));
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: var(--hud-gap);
    padding: 0 clamp(12px, 4vw, 28px);
    max-width: 820px;
    margin: 0 auto;
    z-index: 3;
  }

  .hud a {
    display: inline-flex; align-items: center; justify-content: center;
    padding: 12px 16px;
    font-size: clamp(16px, 2.2vw, var(--btn-fz));
    font-weight: 600;
    color: #eee; text-decoration: none;
    border-radius: 16px;
    background: rgba(20,20,20,0.65);
    border: 1px solid rgba(255,255,255,0.08);
    backdrop-filter: blur(6px);
    box-shadow: 
        0 0 12px rgba(0, 150, 255, 0.6),   /* blue glow */
        0 8px 24px rgba(0,0,0,.45);        /* existing shadow */
    transition: transform .12s ease, background .15s ease, box-shadow .2s ease;
    }

    .hud a:hover { 
    transform: scale(1.05); 
    background: rgba(40,40,40,0.7); 
    box-shadow: 
        0 0 18px rgba(0, 180, 255, 0.9),   /* stronger blue glow on hover */
        0 8px 28px rgba(0,0,0,.55);
    }

  /* Wider screens: show buttons in one row centered */
  @media (min-width: 900px) {
    .hud {
      grid-template-columns: repeat(4, max-content);
      justify-content: center;
      gap: 18px;
    }
    .hud a { padding: 12px 22px; }
  }

  /* Tiny footer (overlaid, unobtrusive) */
  footer {
    position: absolute; left: 50%; bottom: 6px; transform: translateX(-50%);
    font-size: .85rem; color: rgba(255,255,255,0.45); text-align: center;
    z-index: 3; pointer-events: none;
    text-shadow: 0 1px 12px rgba(0,0,0,.7);
  }
</style>
</head>
<body>

  <!-- Fullscreen TV -->
  <div class="tv" id="stage">
    <!-- Video underlay -->
    <video id="vid" preload="metadata" playsinline webkit-playsinline muted poster="static_jj.jpeg">
      <source src="headturn_scrub.webm" type="video/webm">
      <source src="headturn_scrub.mp4"  type="video/mp4">
      Sorry, your browser doesn’t support embedded video.
    </video>

    <!-- Optional CRT flair -->
    <div class="scanlines" aria-hidden="true"></div>

    <!-- TV frame overlay (PNG with transparent screen) -->
    <img class="tv-frame" src="noscreen_img.png" alt="" aria-hidden="true">

    <!-- HUD: title + links -->
    <nav class="hud">
      <a href="socials.html">Socials</a>
      <a href="resume.html">Resume</a>
      <a href="about.html">About</a>
      <a href="portfolio.html">Portfolio</a>
    </nav>

  </div>

<script>
/* === CCW timestamp-driven scrub (same logic; uses the TV as the center) === */
(function(){
  const vid   = document.getElementById('vid');
  const stage = document.getElementById('stage');

  const TIMES_12_INPUT = ["00.0","27.0","25.0","22.0","20.0","19.0","16.0","11.0","10.0","06.0","03.0","02.0"];
  const DUR_FALLBACK   = 30;
  const LABELS_INPUT   = [12,1,2,3,4,5,6,7,8,9,10,11];
  const map = {}; TIMES_12_INPUT.forEach((t,i)=> map[LABELS_INPUT[i]] = parseTS(t));
  const ORDER = [12,11,10,9,8,7,6,5,4,3,2,1];
  const times = ORDER.map(l => map[l]);

  let duration = DUR_FALLBACK;
  vid.addEventListener('loadedmetadata', ()=>{
    duration = vid.duration || DUR_FALLBACK;
    try { vid.currentTime = 0.001; } catch(_){} // nudge iOS to paint a frame
    vid.pause();
  }, { once:true });

  function parseTS(x){
    if (typeof x === 'number') return x;
    if (typeof x !== 'string') return NaN;
    if (x.includes(':')) { const [m,s]=x.split(':'); return (+m||0)*60 + (parseFloat(s)||0); }
    return parseFloat(x);
  }

  // Angle from the center of the screen (CCW, 0°=right, 90°=up)
  function angleCCWFromCenter(e){
    const r  = stage.getBoundingClientRect();
    const cx = r.left + r.width/2, cy = r.top + r.height/2;
    const dx = e.clientX - cx,     dy = e.clientY - cy;
    let deg  = Math.atan2(-dy, dx) * 180/Math.PI;
    if (deg < 0) deg += 360;
    return deg;
  }

  function timeFromAngleCCW(deg){
    const shifted = (deg - 90 + 360) % 360; // 0° at 12 o'clock, increasing CCW
    const seg     = Math.floor(shifted / 30);
    const f       = (shifted % 30) / 30;
    let t0 = times[seg], t1 = times[(seg + 1) % 12];
    if (t1 <= t0) t1 += duration;          // wrap
    return (t0 + f * (t1 - t0)) % duration;
  }

  let raf=false, next=0;
  function onPointerMove(e){
    const deg = angleCCWFromCenter(e);
    next = timeFromAngleCCW(deg);
    if (!raf){
      raf = true;
      requestAnimationFrame(()=>{
        if (Math.abs(vid.currentTime - next) > 0.0005)
          vid.currentTime = next;
        raf = false;
      });
    }
  }

  window.addEventListener('mousemove', onPointerMove, { passive:true });
  window.addEventListener('touchmove', (e)=>{
    const t0 = e.touches[0]; if (!t0) return;
    onPointerMove({ clientX: t0.clientX, clientY: t0.clientY });
  }, { passive:true });
})();
</script>
</body>
</html>

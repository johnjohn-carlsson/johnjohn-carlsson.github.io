<!-- index.html -->
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>john-john.nu</title>
<style>
  :root {
    /* Desktop target; mobile clamps below */
    --size: 600px;
    --ring-radius: 500px;
    --page-top: 12px;
    --page-bottom: 32px;
  }
  * { box-sizing: border-box; }
  body {
    margin: 0; min-height: 100svh;
    display: flex; flex-direction: column; align-items: center; justify-content: flex-start;
    padding-top: var(--page-top); padding-bottom: var(--page-bottom);
    background: #0b0b0b; color: #e8e8e8; font-family: system-ui, Inter, Segoe UI, Roboto, Arial, sans-serif;
  }
  .wrapper { display: flex; flex-direction: column; align-items: center; gap: .6rem; width: 100%; }
  .title { font-size: 3rem; font-weight: 600; border-radius: 6px; backdrop-filter: blur(4px); text-align: center; }

  .stage { position: relative; display: grid; place-items: center; width: 100%; max-width: var(--size); }
  .head { width: 100%; aspect-ratio: 1/1; border-radius: 50%; overflow: hidden;
          box-shadow: 0 30px 60px rgba(0,0,0,.55), inset 0 0 40px rgba(255,255,255,.04); background:#111; }
  video { width:100%; height:100%; object-fit: cover; display:block; }

  nav { position:absolute; inset:0; pointer-events:none; }
  nav a {
    position:absolute; left:50%; top:50%; transform-origin:center center; transform-box: fill-box; translate:-50% -50%; pointer-events:auto;
    padding:14px 24px; background:rgba(255,255,255,0.08); color:#eee; text-decoration:none; border-radius:16px;
    font-size:20px; font-weight:500; backdrop-filter:blur(6px); box-shadow:0 8px 24px rgba(0,0,0,0.45);
    transition: background 150ms ease, transform 120ms ease;
    --pos: rotate(var(--a)) translateY(var(--ring-radius)) rotate(calc(-1 * var(--a)));
    transform: var(--pos);
  }
  nav a:hover{ background:rgba(255,255,255,0.18); transform: var(--pos) scale(1.08); }

  /* 2,4,8,10 o'clock */
  nav a:nth-child(1){ --a:60deg; }   /* 2 */
  nav a:nth-child(2){ --a:120deg; }  /* 4 */
  nav a:nth-child(3){ --a:240deg; }  /* 8 */
  nav a:nth-child(4){ --a:300deg; }  /* 10 */

  @media (max-width: 900px){ :root{ --size: 420px; --ring-radius: 360px; } .title{ font-size: 2.2rem; } }
    @media (max-width: 620px){
    :root { --size: clamp(240px, 90vw, 70vh); }
    .title { font-size: 1.8rem; }

    .stage {
        display:flex;
        flex-direction:column;
        align-items:center;
        gap:14px;
        width: 100%;
        max-width: var(--size);
    }

    nav {
        position: static;
        pointer-events:auto;
        display:grid;
        grid-template-columns: repeat(2, 1fr);
        gap:12px;
        width:90%;               /* keep some gutter */
        max-width:420px;
        margin:0 auto;
        padding: 0 clamp(12px, 4vw, 20px); /* side padding so buttons don't touch edges */
        justify-content:center;
        justify-items:stretch;
    }

    nav a {
        position: static;
        left: auto;
        top: auto;
        transform: none;
        translate: 0 0;           /* reset desktop translate */
        --pos: none;

        text-align: center;
        font-size: 18px;
        padding: 10px 12px;
        border-radius: 14px;
        width: 100%;
    }

    nav a:hover {
        transform: scale(1.05);
    }

    /* prevent horizontal scrollbars */
    html, body { overflow-x: hidden; }
    }

    footer {
  margin-top: auto;          /* push footer to bottom if space allows */
  padding: 16px 0;
  font-size: 0.85rem;
  color: rgba(255,255,255,0.45);
  text-align: center;
}
</style>
</head>
<body>
  <div class="wrapper">
    <div class="title">Oh look, a cursor!</div>

    <div class="stage" id="stage">
      <div class="head">
        <video id="vid" preload="metadata" playsinline muted poster="static_jj.jpeg">
        <source src="headturn_scrub.webm" type="video/webm">
        <source src="headturn_scrub.mp4"  type="video/mp4">
        Sorry, your browser doesn’t support embedded video.
        </video>
      </div>

      <nav>
        <a href="socials.html">Socials</a>
        <a href="resume.html">Resume</a>
        <a href="about.html">About</a>
        <a href="portfolio.html">Portfolio</a>
      </nav>
    </div>
  </div>

  <footer>
  © 2025 John-John Carlsson. All rights reserved.
</footer>

<script>
/* CCW timestamp-driven scrub */
(function(){
  const vid=document.getElementById('vid'); const stage=document.getElementById('stage');
  const TIMES_12_INPUT=["00.0","27.0","25.0","22.0","20.0","19.0","16.0","11.0","10.0","06.0","03.0","02.0"];
  const DUR_FALLBACK=30;
  const LABELS_INPUT=[12,1,2,3,4,5,6,7,8,9,10,11];
  const map={}; TIMES_12_INPUT.forEach((t,i)=>{const lab=LABELS_INPUT[i];map[lab]=parseTS(t);});
  const ORDER=[12,11,10,9,8,7,6,5,4,3,2,1];
  const times=ORDER.map(l=>map[l]);
  let duration=DUR_FALLBACK;
  vid.addEventListener('loadedmetadata',()=>{duration=vid.duration||DUR_FALLBACK; vid.pause();},{once:true});

  function parseTS(x){ if(typeof x==='number')return x; if(typeof x!=='string')return NaN;
    if(x.includes(':')){const [m,s]=x.split(':'); return (+m||0)*60+(parseFloat(s)||0);} return parseFloat(x); }

  function angle(e){ const r=stage.getBoundingClientRect(); const cx=r.left+r.width/2, cy=r.top+r.height/2;
    const dx=e.clientX-cx, dy=e.clientY-cy; let d=Math.atan2(-dy,dx)*180/Math.PI; if(d<0)d+=360; return d; }

  function tFromDegCCW(d){ const shifted=(d-90+360)%360; const seg=Math.floor(shifted/30); const f=(shifted%30)/30;
    let t0=times[seg], t1=times[(seg+1)%12]; if(t1<=t0)t1+=duration; return (t0+f*(t1-t0))%duration; }

  let raf=false,next=0;
  function onMove(e){ const d=angle(e); next=tFromDegCCW(d);
    if(!raf){raf=true; requestAnimationFrame(()=>{ if(Math.abs(vid.currentTime-next)>0.0005) vid.currentTime=next; raf=false; });}}
  window.addEventListener('mousemove',onMove,{passive:true});
  window.addEventListener('touchmove',e=>{const t=e.touches[0]; if(!t)return; onMove({clientX:t.clientX, clientY:t.clientY});},{passive:true});
})();
</script>
</body>
</html>
